"use strict";var express=require("express"),path=require("path"),User=require("./config"),bcrypt=require("bcrypt"),app=express();app.use(express.static(__dirname+"public")),app.use(express.json()),app.use(express.urlencoded({extended:!1})),app.set("view engine","ejs"),app.get("/public/css/styles.css",function(e,r){var s=path.join(__dirname,"public","css","styles.css");r.type("text/css"),r.sendFile(s)}),app.get("/public/js/form.js",function(e,r){var s=path.join(__dirname,"public","js","form.js");r.type("application/javascript"),r.sendFile(s)}),app.get("/",function(e,r){r.render("main")}),app.get("/Signin",function(e,r){r.render("main")}),app.get("/Login",function(e,r){r.render("main")}),app.post("/Signin",function(r,s){var n,a,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if((n={name:r.body.email,password:r.body.password,ReTypePassword:r.body.ReTypePassword,firstName:r.body.FirstName,lastName:r.body.LastName,gender:r.body.Gender}).password!==n.ReTypePassword)return e.abrupt("return",s.send("Password and Retype Password do not match."));e.next=5;break;case 5:return e.next=7,regeneratorRuntime.awrap(User.findOne({name:n.name}));case 7:if(!e.sent){e.next=12;break}s.send("User already exists. Please choose a different Email."),e.next=22;break;case 12:return 10,e.next=15,regeneratorRuntime.awrap(bcrypt.hash(n.password,10));case 15:return a=e.sent,n.password=a,t=new User(n),e.next=20,regeneratorRuntime.awrap(t.save());case 20:console.log("User registered:",t),s.send("User registered successfully.");case 22:case"end":return e.stop()}})}),app.post("/Login",function(r,s){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(User.findOne({name:r.body.email}));case 3:if(n=e.sent){e.next=8;break}s.send("User name cannot found"),e.next=12;break;case 8:return e.next=10,regeneratorRuntime.awrap(bcrypt.compare(r.body.password,n.password));case 10:e.sent?s.render("home"):s.send("wrong Password");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),s.send("wrong Details");case 17:case"end":return e.stop()}},null,null,[[0,14]])});var port=5e3;app.listen(port,function(){console.log("Server listening on port http://localhost:".concat(port))});
//# sourceMappingURL=index.min.js.map
